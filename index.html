<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>Pafy by np1</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Pafy</h1>
        <h2>Python API for YouTube - Download videos and retrieve metadata from YouTube</h2>

        <section id="downloads">
          <a href="https://github.com/np1/pafy/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/np1/pafy/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/np1/pafy" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Retreive metadata such as viewcount, duration, rating, author, thumbnail, keywords</li>
<li>Download video or audio at requested resolution / bitrate / format / filesize</li>
<li>Command line tool (ytdl) for downloading directly from the command line</li>
<li>Retrieve the URL to stream the video in a player such as vlc or mplayer</li>
<li>Works with age-restricted videos and non-embeddable videos</li>
<li>Small, standalone, single importable module file (pafy.py)</li>
<li>Select highest quality stream for download or streaming</li>
<li>Download audio only (no video) in ogg or m4a format</li>
<li>Download video only (no audio) in m4v format</li>
<li>Works with Python 2.7 and 3.x</li>
<li>No dependencies</li>
</ul><h2>
<a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p>Full documentation is available at <code>pythonhosted.org
&lt;http://pythonhosted.org/Pafy/code.html/&gt;</code>_</p>

<h2>
<a name="usage-examples" class="anchor" href="#usage-examples"><span class="octicon octicon-link"></span></a>Usage Examples</h2>

<p>Here is how to use the module in your own python code.  For command line tool
(ytdl) instructions, see further below::</p>

<pre><code>&gt;&gt;&gt; import pafy
</code></pre>

<p>create a video instance from a YouTube url::</p>

<pre><code>&gt;&gt;&gt; url = "http://www.youtube.com/watch?v=cyMHZVT91Dw"
&gt;&gt;&gt; video = pafy.new(url)
</code></pre>

<p>get certain attributes::</p>

<pre><code>&gt;&gt;&gt; video.title
u'Rick Astley Sings Live - Never Gonna Give You Up - This Morning'


&gt;&gt;&gt; video.rating
4.93608852755

&gt;&gt;&gt; video.length
355
</code></pre>

<p>display video metadata::</p>

<pre><code>&gt;&gt;&gt; print video

Title: Rick Astley Sings Live - Never Gonna Give You Up - This Morning
Author: Ryan915
ID: cyMHZVT91Dw
Duration: 00:05:55
Rating: 4.93608852755
Views: 672583
Thumbnail: https://i1.ytimg.com/vi/cyMHZVT91Dw/default.jpg
Keywords: Rick, Astley, Sings, Live, on, This, Morning, Never, Gonna, You...  
</code></pre>

<p>show regular formats for a video (video files with audio)::</p>

<pre><code>&gt;&gt;&gt; streams = video.streams
&gt;&gt;&gt; for s in streams:
&gt;&gt;&gt;     print s.resolution, s.extension

480x854 webm
480x854 flv
360x640 webm
360x640 flv
360x640 mp4
240x400 flv
320x240 3gp
144x176 3gp
</code></pre>

<p>show all formats, file-sizes and their download url::</p>

<pre><code>&gt;&gt;&gt; for s in streams:
&gt;&gt;&gt;     print s.resolution, s.extension, s.get_filesize(), s.url

480x854 webm 56858674 http://r12--sn-aoh8kier.c.youtube.com/videoplayback?expire=1369...
480x854 flv 53066081 http://r11---sn-aoh8kier.c.youtube.com/videoplayback?expire=1369...
360x640 webm 34775366 http://r11---sn-aoh8kier.c.youtube.com/videoplayback?expire=1369...
360x640 flv 32737100 http://r11---sn-aoh8kier.c.youtube.com/videoplayback?expire=1369...
360x640 mp4 25919932 http://r11---sn-aoh8kier.c.youtube.com/videoplayback?expire=1369...
240x400 flv 14341366 http://r11---sn-aoh8kier.c.youtube.com/videoplayback?expire=1369...
320x240 3gp 11083585 http://r11---sn-aoh8kier.c.youtube.com/videoplayback?expire=1369...
144x176 3gp 3891135 http://r11---sn-aoh8kier.c.youtube.com/videoplayback?expire=1369...
</code></pre>

<p>get best resolution regardless of file format::</p>

<pre><code>&gt;&gt;&gt; best = video.getbest()
&gt;&gt;&gt; best.resolution, best.extension

('480x854', 'webm')
</code></pre>

<p>get best resolution for a particular file format:
(mp4, webm, flv or 3gp)::</p>

<pre><code>&gt;&gt;&gt; best = video.getbest(preftype="mp4")
&gt;&gt;&gt; best.resolution, best.extension

('360x640', 'mp4')
</code></pre>

<p>get best resolution for a particular file format, or return
different format if it has the best resolution::</p>

<pre><code>&gt;&gt;&gt; best = video.getbest(preftype="mp4", ftypestrict=False)
&gt;&gt;&gt; best.resolution, best.extension

('480x854', 'webm')
</code></pre>

<p>get url, for download or streaming in mplayer / vlc etc::</p>

<pre><code>&gt;&gt;&gt; best.url

'http://r12---sn-aig7kner.c.youtube.com/videoplayback?expire=1369...
</code></pre>

<p>Download video and show progress::</p>

<pre><code>&gt;&gt;&gt; best.download(quiet=False)
-Downloading 'Rick Astley Sings Live - Never Gonna Give You Up - This Morning.webm' [56,858,674 Bytes]

  56,858,674 Bytes [100.00%] received. Rate: [ 720 kbps].  ETA: [0 secs]    
Done
</code></pre>

<p>Download video, use specific filepath::</p>

<pre><code>&gt;&gt;&gt; myfilename = "/tmp/" + best.title + "." + best.extension
&gt;&gt;&gt; best.download(filepath=myfilename)
</code></pre>

<p>Get audio-only streams (m4a and/or ogg vorbis)
(use video.videostreams to get video-only streams)::</p>

<pre><code>&gt;&gt;&gt; audiostreams = video.audiostreams
&gt;&gt;&gt; for a in audiostreams:
&gt;&gt;&gt;     print(a.quality, a.extension, a.get_filesize())

('48k', 'm4a', 2109164)
('128k', 'm4a', 5630839)
('256k', 'm4a', 11302824)
</code></pre>

<p>Download the 3rd audio stream from the above list::</p>

<pre><code>&gt;&gt;&gt; audiostreams[2].download()
</code></pre>

<p>Get the best quality audio stream::</p>

<pre><code>&gt;&gt;&gt; bestaudio = video.getbestaudio()
&gt;&gt;&gt; bestaudio.bitrate

'256k'
</code></pre>

<p>Download the best quality audio file::</p>

<pre><code>&gt;&gt;&gt; bestaudio.download()
</code></pre>

<p>show ALL formats for a video (video+audio, video-only and audio-only)::</p>

<pre><code>&gt;&gt;&gt; allstreams = video.allstreams
&gt;&gt;&gt; for s in allstreams:
&gt;&gt;&gt;     print(s.quality, s.extension, s.mediatype)

('1280x720', 'mp4', 'a/v')
('640x360', 'webm', 'a/v')
('640x360', 'mp4', 'a/v')
('320x240', 'flv', 'a/v')
('320x240', '3gp', 'a/v')
('176x144', '3gp', 'a/v')
('1920x1080', 'm4v', 'video')
('1280x720', 'm4v', 'video')
('854x480', 'm4v', 'video')
('640x360', 'm4v', 'video')
('426x240', 'm4v', 'video')
('256x144', 'm4v', 'video')
('48k', 'm4a', 'audio')
('128k', 'm4a', 'audio')
('256k', 'm4a', 'audio')
('128k', 'ogg', 'audio')
('256k', 'ogg', 'audio')
</code></pre>

<h2>
<a name="command-line-tool-ytdl-usage" class="anchor" href="#command-line-tool-ytdl-usage"><span class="octicon octicon-link"></span></a>Command Line Tool (ytdl) Usage</h2>

<p>::</p>

<pre><code>usage: ytdl [-h] [-i] [-s]
            [-t {audio,video,normal,all} [{audio,video,normal,all} ...]]
            [-n N] [-b] [-a]
            url

YouTube Download Tool

positional arguments:
  url                   YouTube video URL to download

optional arguments:
  -h, --help            show this help message and exit
  -i                    Display vid info
  -s                    Display available streams
  -t {audio,video,normal,all} [{audio,video,normal,all} ...]
                        Stream types to display
  -n N                  Specify stream to download by stream number (use -s to
                        list available streams)
  -b                    Download the best quality video (ignores -n)
  -a                    Download the best quality audio (ignores -n)
</code></pre>

<h2>
<a name="ytdl-examples" class="anchor" href="#ytdl-examples"><span class="octicon octicon-link"></span></a>YTDL Examples</h2>

<p>Download best available resolution (-b)::</p>

<pre><code>ytdl "http://www.youtube.com/watch?v=cyMHZVT91Dw" -b
</code></pre>

<p>Download best available audio stream (-a):
(note; the full url is not required, just the video id will suffice)::</p>

<pre><code>ytdl cyMHZVT91Dw -a
</code></pre>

<p>get video info (-i)::</p>

<pre><code>ytdl cyMHZVT91Dw -i
</code></pre>

<p>list available dowload streams::</p>

<pre><code>ytdl cyMHZVT91Dw

Stream Type    Format Quality         Size            
------ ----    ------ -------         ----            
1      normal  webm   [640x360]       33 MB           
2      normal  mp4    [640x360]       24 MB           
3      normal  flv    [320x240]       13 MB           
4      normal  3gp    [320x240]       10 MB           
5      normal  3gp    [176x144]        3 MB           
6      audio   m4a    [48k]            2 MB           
7      audio   m4a    [128k]           5 MB           
8      audio   m4a    [256k]          10 MB     
</code></pre>

<p>Download mp4 640x360 (ie. stream number 2)::</p>

<pre><code>ytdl cyMHZVT91Dw -n2
</code></pre>

<p>Download m4a audio stream at 256k bitrate::</p>

<pre><code>ytdl cyMHZVT91Dw -n8
</code></pre>
      </section>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-41778544-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>