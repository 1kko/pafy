<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>Pafy by np1</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Pafy</h1>
        <h2>Python API for YouTube - Download videos and retrieve metadata from YouTube</h2>

        <section id="downloads">
          <a href="https://github.com/np1/pafy/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/np1/pafy/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/np1/pafy" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a name="pafy" class="anchor" href="#pafy"><span class="octicon octicon-link"></span></a>PAFY</h1>

<p>Python API for YouTube</p>

<p>by nagev</p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features:</h2>

<ul>
<li>Download any stream for a particular video</li>
<li>Select best quality stream for download</li>
<li>Retreive metadata such as viewcount, duration, rating, author, thumbnail, keywords</li>
<li>Retrieve all availabe streams for a YouTube video (all resolutions and formats)</li>
<li>Retrieve the Download URL to download or stream the video</li>
<li>Small, standalone, single importable module file.</li>
<li>Works with age-restricted videos and non-embeddable videos</li>
<li>No dependencies</li>
<li>Command line tool (ytdl) for downloading directly from the command line</li>
</ul><h2>
<a name="usage-examples" class="anchor" href="#usage-examples"><span class="octicon octicon-link"></span></a>Usage Examples:</h2>

<p>Here is how to use the module in your own python code.  For command line tool
(ytdl) instructions, see further below:</p>

<div class="highlight"><pre>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pafy</span> <span class="kn">import</span> <span class="n">Pafy</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"http://www.youtube.com/watch?v=cyMHZVT91Dw"</span>


    <span class="c"># create a video instance</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">video</span> <span class="o">=</span> <span class="n">Pafy</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>


    <span class="c"># get certain attributes</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">video</span><span class="o">.</span><span class="n">title</span>
<span class="s">u'Rick Astley Sings Live - Never Gonna Give You Up - This Morning'</span>


<span class="o">&gt;&gt;&gt;</span> <span class="n">video</span><span class="o">.</span><span class="n">rating</span>
<span class="mf">4.93608852755</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">video</span><span class="o">.</span><span class="n">length</span>
<span class="mi">355</span>

    <span class="c"># display video metadata</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">video</span>
<span class="n">Title</span><span class="p">:</span> <span class="n">Rick</span> <span class="n">Astley</span> <span class="n">Sings</span> <span class="n">Live</span> <span class="o">-</span> <span class="n">Never</span> <span class="n">Gonna</span> <span class="n">Give</span> <span class="n">You</span> <span class="n">Up</span> <span class="o">-</span> <span class="n">This</span> <span class="n">Morning</span>
<span class="n">Author</span><span class="p">:</span> <span class="n">Ryan915</span>
<span class="n">ID</span><span class="p">:</span> <span class="n">cyMHZVT91Dw</span>
<span class="n">Duration</span><span class="p">:</span> <span class="mo">00</span><span class="p">:</span><span class="mo">05</span><span class="p">:</span><span class="mi">55</span>
<span class="n">Rating</span><span class="p">:</span> <span class="mf">4.93608852755</span>
<span class="n">Views</span><span class="p">:</span> <span class="mi">672583</span>
<span class="n">Thumbnail</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">i1</span><span class="o">.</span><span class="n">ytimg</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">vi</span><span class="o">/</span><span class="n">cyMHZVT91Dw</span><span class="o">/</span><span class="n">default</span><span class="o">.</span><span class="n">jpg</span>
<span class="n">Keywords</span><span class="p">:</span> <span class="n">Rick</span><span class="p">,</span> <span class="n">Astley</span><span class="p">,</span> <span class="n">Sings</span><span class="p">,</span> <span class="n">Live</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">This</span><span class="p">,</span> <span class="n">Morning</span><span class="p">,</span> <span class="n">Never</span><span class="p">,</span> <span class="n">Gonna</span><span class="p">,</span> <span class="n">Gunna</span><span class="p">,</span> <span class="n">Give</span><span class="p">,</span> <span class="n">You</span><span class="p">,</span><span class="o">...</span>


    <span class="c"># show all formats for a video:</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">streams</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">streams</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">:</span>
<span class="o">&gt;&gt;&gt;</span>     <span class="k">print</span> <span class="n">s</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">extension</span>
<span class="mi">480</span><span class="n">x854</span> <span class="n">webm</span>
<span class="mi">480</span><span class="n">x854</span> <span class="n">flv</span>
<span class="mi">360</span><span class="n">x640</span> <span class="n">webm</span>
<span class="mi">360</span><span class="n">x640</span> <span class="n">flv</span>
<span class="mi">360</span><span class="n">x640</span> <span class="n">mp4</span>
<span class="mi">240</span><span class="n">x400</span> <span class="n">flv</span>
<span class="mi">320</span><span class="n">x240</span> <span class="mi">3</span><span class="n">gp</span>
<span class="mi">144</span><span class="n">x176</span> <span class="mi">3</span><span class="n">gp</span>


    <span class="c"># show all formats and their download url:</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">:</span>
<span class="o">&gt;&gt;&gt;</span>     <span class="k">print</span> <span class="n">s</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">extension</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">url</span>
<span class="mi">480</span><span class="n">x854</span> <span class="n">webm</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">r12</span><span class="o">--</span><span class="n">sn</span><span class="o">-</span><span class="n">aoh8kier</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">videoplayback</span><span class="err">?</span><span class="n">expire</span><span class="o">=</span><span class="mf">1369.</span><span class="o">..</span>
<span class="mi">480</span><span class="n">x854</span> <span class="n">flv</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">r11</span><span class="o">---</span><span class="n">sn</span><span class="o">-</span><span class="n">aoh8kier</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">videoplayback</span><span class="err">?</span><span class="n">expire</span><span class="o">=</span><span class="mf">1369.</span><span class="o">..</span>
<span class="mi">360</span><span class="n">x640</span> <span class="n">webm</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">r11</span><span class="o">---</span><span class="n">sn</span><span class="o">-</span><span class="n">aoh8kier</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">videoplayback</span><span class="err">?</span><span class="n">expire</span><span class="o">=</span><span class="mf">1369.</span><span class="o">..</span>
<span class="mi">360</span><span class="n">x640</span> <span class="n">flv</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">r11</span><span class="o">---</span><span class="n">sn</span><span class="o">-</span><span class="n">aoh8kier</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">videoplayback</span><span class="err">?</span><span class="n">expire</span><span class="o">=</span><span class="mf">1369.</span><span class="o">..</span>
<span class="mi">360</span><span class="n">x640</span> <span class="n">mp4</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">r11</span><span class="o">---</span><span class="n">sn</span><span class="o">-</span><span class="n">aoh8kier</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">videoplayback</span><span class="err">?</span><span class="n">expire</span><span class="o">=</span><span class="mf">1369.</span><span class="o">..</span>
<span class="mi">240</span><span class="n">x400</span> <span class="n">flv</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">r11</span><span class="o">---</span><span class="n">sn</span><span class="o">-</span><span class="n">aoh8kier</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">videoplayback</span><span class="err">?</span><span class="n">expire</span><span class="o">=</span><span class="mf">1369.</span><span class="o">..</span>
<span class="mi">320</span><span class="n">x240</span> <span class="mi">3</span><span class="n">gp</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">r11</span><span class="o">---</span><span class="n">sn</span><span class="o">-</span><span class="n">aoh8kier</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">videoplayback</span><span class="err">?</span><span class="n">expire</span><span class="o">=</span><span class="mf">1369.</span><span class="o">..</span>
<span class="mi">144</span><span class="n">x176</span> <span class="mi">3</span><span class="n">gp</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">r11</span><span class="o">---</span><span class="n">sn</span><span class="o">-</span><span class="n">aoh8kier</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">videoplayback</span><span class="err">?</span><span class="n">expire</span><span class="o">=</span><span class="mf">1369.</span><span class="o">..</span>


    <span class="c"># get best resolution regardless of file format:</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">best</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">getbest</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">best</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="n">best</span><span class="o">.</span><span class="n">extension</span>
<span class="p">(</span><span class="s">'480x854'</span><span class="p">,</span> <span class="s">'webm'</span><span class="p">)</span>


    <span class="c"># get best resolution for a particular file format:</span>
    <span class="c"># (mp4, webm, flv or 3gp)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">best</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">getbest</span><span class="p">(</span><span class="n">preftype</span><span class="o">=</span><span class="s">"mp4"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">best</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="n">best</span><span class="o">.</span><span class="n">extension</span>
<span class="p">(</span><span class="s">'360x640'</span><span class="p">,</span> <span class="s">'mp4'</span><span class="p">)</span>


    <span class="c"># get best resolution for a particular file format, or return</span>
    <span class="c"># a different format if it has the best resolution</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">best</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">getbest</span><span class="p">(</span><span class="n">preftype</span><span class="o">=</span><span class="s">"mp4"</span><span class="p">,</span> <span class="n">ftypestrict</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">best</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="n">best</span><span class="o">.</span><span class="n">extension</span>
<span class="p">(</span><span class="s">'480x854'</span><span class="p">,</span> <span class="s">'webm'</span><span class="p">)</span>


    <span class="c"># get url, for download or streaming in mplayer / vlc etc</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">best</span><span class="o">.</span><span class="n">url</span>
<span class="s">'http://r12---sn-aig7kner.c.youtube.com/videoplayback?expire=1369...</span>


    <span class="c"># Download video and show progress:</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">best</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">quiet</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="o">-</span><span class="n">Downloading</span> <span class="s">'Rick Astley Sings Live - Never Gonna Give You Up - This Morning.webm'</span> <span class="p">[</span><span class="mi">56</span><span class="p">,</span><span class="mi">858</span><span class="p">,</span><span class="mi">674</span> <span class="n">Bytes</span><span class="p">]</span>
  <span class="mi">56</span><span class="p">,</span><span class="mi">858</span><span class="p">,</span><span class="mi">674</span> <span class="n">Bytes</span> <span class="p">[</span><span class="mf">100.00</span><span class="o">%</span><span class="p">]</span> <span class="n">received</span><span class="o">.</span> <span class="n">Rate</span><span class="p">:</span> <span class="p">[</span> <span class="mi">720</span> <span class="n">kbps</span><span class="p">]</span><span class="o">.</span>  <span class="n">ETA</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="n">secs</span><span class="p">]</span>    
<span class="n">Done</span>


    <span class="c"># Download video, use specific filepath:</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">myfilename</span> <span class="o">=</span> <span class="s">"/tmp/"</span> <span class="o">+</span> <span class="n">best</span><span class="o">.</span><span class="n">title</span> <span class="o">+</span> <span class="s">"."</span> <span class="o">+</span> <span class="n">best</span><span class="o">.</span><span class="n">extension</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">best</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">quiet</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="n">myfilename</span><span class="p">)</span>
<span class="o">-</span><span class="n">Downloading</span> <span class="s">'Rick Astley Sings Live - Never Gonna Give You Up - This Morning.webm'</span> <span class="p">[</span><span class="mi">56</span><span class="p">,</span><span class="mi">858</span><span class="p">,</span><span class="mi">674</span> <span class="n">Bytes</span><span class="p">]</span>
<span class="n">Done</span>
</pre></div>

<h1>
<a name="command-line-tool-ytdl-usage" class="anchor" href="#command-line-tool-ytdl-usage"><span class="octicon octicon-link"></span></a>Command Line Tool (ytdl) Usage:</h1>

<pre lang="shell"><code>
usage: ytdl [-h] [-i] [-s] [-f {webm,mp4,3gp,flv}] [-r NNNxNNN] [-n N] [-b]
            url

YouTube Download Tool

positional arguments:
  url                   YouTube video URL to download

optional arguments:
  -h, --help            show this help message and exit
  -i                    Display video info
  -s                    Display available streams
  -n N                  Specify stream to download by stream number (use -s to
                        list, ignores -f and -r)
  -b                    Download the best quality video (ignores -n, -f and
                        -r)

format and quality:
  Specify the stream to download by resolution and file format

  -f {webm,mp4,3gp,flv}
                        format of the video to download
  -r NNNxNNN            resolution of the video to download

Examples:

# Download best available resolution (-b):

    ytdl "http://www.youtube.com/watch?v=cyMHZVT91Dw" -b

# get video info (-i):

    ytdl "http://www.youtube.com/watch?v=cyMHZVT91Dw" -i

# list available download formats (-s):

  ytdl "http://www.youtube.com/watch?v=cyMHZVT91Dw" -s

    Stream  Format  Resolution  Size
    ------  ------  ----------  ----
    1   webm    480x854      54 MB
    2   flv     480x854      50 MB
    3   webm    360x640      33 MB
    4   flv     360x640      31 MB
    5   mp4     360x640      24 MB
    6   flv     240x400      13 MB
    7   3gp     320x240      10 MB
    8   3gp     144x176       3 MB

# Download mp4 360x640, ie. stream number 4 (-n4)

    ytdl "http://www.youtube.com/watch?v=cyMHZVT91Dw" -n 4

# Download flv at 240x400 (-f flv -r 240x400)

    ytdl "youtube.com/watch?v=cyMHZVT91Dw" -f flv -r 240x400 

</code></pre>
      </section>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-41778544-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

